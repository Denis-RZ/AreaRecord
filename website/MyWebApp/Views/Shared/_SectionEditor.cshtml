@model MyWebApp.Models.PageSection
@using MyWebApp.Models
<div>
    <label>Type</label>
    <select asp-for="Type" asp-items="Html.GetEnumSelectList<PageSectionType>()" id="type-select"></select>
</div>
<div id="html-editor" class="type-editor">
    <div class="quill-editor" id="quill-editor"></div>
    <input type="hidden" asp-for="Html" />
</div>
<div id="markdown-editor" class="type-editor">
    <textarea asp-for="Html"></textarea>
</div>
<div id="code-editor" class="type-editor">
    <textarea asp-for="Html"></textarea>
</div>
    <div id="file-editor" class="type-editor">
        <input type="file" name="file" />
    </div>
    <button type="button" class="add-library">Add to Library</button>
    <script>
    const typeSelect = document.getElementById('type-select');
    const htmlDiv = document.getElementById('html-editor');
    const markdownDiv = document.getElementById('markdown-editor');
    const codeDiv = document.getElementById('code-editor');
    const fileDiv = document.getElementById('file-editor');
    const quill = new Quill('#quill-editor', { theme: 'snow' });
    quill.root.innerHTML = document.getElementById('Html').value;
    function updateEditors() {
        htmlDiv.style.display = typeSelect.value == 'Html' ? 'block' : 'none';
        markdownDiv.style.display = typeSelect.value == 'Markdown' ? 'block' : 'none';
        codeDiv.style.display = typeSelect.value == 'Code' ? 'block' : 'none';
        fileDiv.style.display = (typeSelect.value == 'Image' || typeSelect.value == 'Video') ? 'block' : 'none';
    }
    updateEditors();
    typeSelect.addEventListener('change', updateEditors);
    document.querySelector('form').addEventListener('submit', function () {
        if (typeSelect.value === 'Html') {
            document.getElementById('Html').value = quill.root.innerHTML;
        }
    });
</script>
